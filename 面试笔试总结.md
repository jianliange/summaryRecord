# 事件循环机制
- 非阻塞的单线程语言，所以只能有一个主线程来执行代码。
- 首先分为同步任务和异步任务，异步任务中又会分为宏任务与微任务
- 遇到同步任务先执行同步任务,遇到异步任务将异步任务排到宏任务和微任务队列中，直到同步任务都执行完毕，确认微任务队列，有则执行完毕微任务，执行完毕之后执行宏任务队列，执行完一个宏任务之后，再确认微任务队列，有则先执行微任务队列，执行完毕再执行宏任务队列，如此循环。
- 同步任务：console.log() / new Promise() 等
- 异步任务
    - 宏任务： setTimeout/setInterval/ajax
    - 微任务： promise().then
- 练习
```js
    window.onload = function(){
      console.log(1) 
      setTimeout(function () {
          console.log(4);
          new Promise(function(resolve,reject){
                console.log(5)
                resolve(6)
            }).then(function(val){
                console.log(val);
            })
      });

      new Promise(function(resolve,reject){
          console.log(2)
          resolve(3)
      }).then(function(val){
          console.log(val);
          setTimeout(function () {
              console.log(10);
              new Promise(function(resolve,reject){
                    console.log(11)
                    resolve(12)
                }).then(function(val){
                    console.log(val);
                })
          });
      })
      setTimeout(function () {
          console.log(7);
          new Promise(function(resolve,reject){
                console.log(8)
                resolve(9)
            }).then(function(val){
                console.log(val);
            })
      });
      console.log(22);
    }
```

# 原型和原型链
- 实例对象的原型man._proto_指向实例原型Person.prototype：man._proto_ === Person.prototype
- 实例原型的构造函数Person.prototype.constructor指向构造函数本身Person：Person.prototype.constructor === Person
- 实例原型的原型Person.prototype._proto指向对象原型Object.prototype：Person.prototype._proto === Object.prototype
- 对象原型的原型的构造函数 Object.prototype.constructor 指向对象实例 Object()：Object.prototype === Object()
- 实例对象的原型Object().prototype指向实例对象原型 Object.prototype：Object().prototype === Object.prototype
- null 表示“没有对象”，即该处不应该有值：Object.prototype.__proto__ === null
- 当读取实例的属性时，如果找不到，就会查找与对象关联的原型中的属性，如果还查不到，就去找原型的原型，一直找到最顶层为止。

# 变量对象
## 全局上下文
- 全局对象：在顶层js代码中声明的所有变量都是全局对象的属性，可以用关键词this引用全局对象。
- 全局上下文中的变量对象就是全局对象。
## 函数上下文
- 活动对象(activation object, AO)：来表示变量对象；只有js代码进入到这个变量对象的执行上下文中，这个变量对象才会被激活创建，这个活动对象上的各种属性才能被访问，它通过函数的 arguments 属性初始化。arguments 属性值是 Arguments 对象。

- function中声明对象，如果用了var这些进行变量声明，会进行变量提升，加入到AO中，此时变量值为undefined；如果没有用var这些进行变量声明，则会默认存到当前执行上下文的全局对象中。